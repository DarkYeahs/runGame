window.Game.Asset=Hilo.Class.create({Mixes:Hilo.EventMixin,queue:null,sound:null,timeflag:null,dom:null,gameEnter:null,gameRules:null,gameScene:null,gamePause:null,gameRenew:null,gameOver:null,cutDown:null,appGrade:null,load:function(){this.dom=document.getElementById("load-progress"),this.queue=new Hilo.LoadQueue,this.queue.maxConnections=4,this.queue.add([{id:"cutDown",src:"./images/cutDown_sprite.png"},{id:"enterGame",src:"./images/enterGame_sprite.png"},{id:"gameRules",src:"./images/gameRules_sprite.png"},{id:"gameScene",src:"./images/gameScene_sprite.png"},{id:"gamePause",src:"./images/gamePause_sprite.png"},{id:"gameRenew",src:"./images/gameRenew_sprite.png"},{id:"gameOver",src:"./images/wx_Grade_sprite.png"},{id:"appGrade",src:"./images/app_Grade_sprite.png"},{id:"rankList",src:"./images/rankList_sprite.png"},{id:"btn_downLoad",src:"./images/btn_downLoad.png"},{id:"btn_wshare",src:"./images/btn_wshare.png"},{id:"btn_playAgain",src:"./images/btn_playAgain.png"},{id:"btn_share",src:"./images/btn_share.png"},{id:"btn_view_rank",src:"./images/btn_view_rank.png"},{id:"playBtn",src:"./images/playBtn.png"}]),this.queue.on("complete",this.onComplete.bind(this)),this.queue.start(),this.timeflag=window.setInterval(this.checkLoad.bind(this),10)},checkLoad:function(){var e=this.queue.getLoaded(),t=this.queue.getTotal(),a=parseFloat(e/t*100);a=a.toFixed(2),this.dom.innerHTML=a+"%",100==a&&window.clearInterval(this.timeflag)},onComplete:function(){this.gameEnter=this.queue.get("enterGame").content,this.gameRules=this.queue.get("gameRules").content,this.gameScene=this.queue.get("gameScene").content,this.gamePause=this.queue.get("gamePause").content,this.gameRenew=this.queue.get("gameRenew").content,this.gameOver=this.queue.get("gameOver").content,this.cutDown=this.queue.get("cutDown").content,this.appGrade=this.queue.get("appGrade").content,this.queue.off("complete"),this.dom.style.display="none",this.fire("complete")}}),function(s){var t=s.EnterScene=Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){t.superclass.constructor.call(this,e),this.init()},init:function(e){var t=new Hilo.Bitmap({id:"enterbackground",image:s.asset.gameEnter,rect:[0,0,720,1166],scaleX:s.scaleX,scaleY:s.scaleY,x:0,y:0}),a=new Hilo.Bitmap({id:"enterBtn",image:s.asset.gameEnter,rect:[735,0,318,100],y:s.stage.height/5*4,scaleX:s.scaleX,scaleY:s.scaleY}),i=new Hilo.Text({id:"viewRankBtn",text:"查看排行榜",width:this.width/4,textAlign:"center",color:"#fff",scaleX:1.8,scaleY:1.8});this.addChild(t,a),a.x=(s.width-a.width*a.scaleX)/2,i.x=(s.width-i.width*i.scaleX)/2,i.y=a.y+1.5*a.height*a.scaleY,a.on("touchstart",function(e){Game.stage.removeChild(s.enterScene),Game.gameReady()}),i.on("touchstart",function(){$(".rank-container").show();var e="http://active.app.doubimeizhi.com/olympic/v1/game/rank/top";e+="?"+getString(s.configs,salt);var c="<li class='rank-item'><span class='name'>$rank   $name</span><span class='time'>$time秒</span></li>",l="<li class='rank-item active'><span class='name'>$rank   $name</span><span class='time'>$time秒</span></li>";$.ajax({url:e,type:"GET",dataType:"json",success:function(e){for(var t="",a=e.myrank.rank,i=e.top,s=0,n=i.length;s<n;s++)i[s].rank==a?t+=l.replace(/\$rank/g,"NO."+i[s].rank).replace(/\$name/g,i[s].nick_name).replace(/\$time/g,i[s].score):t+=c.replace(/\$rank/g,"NO."+i[s].rank).replace(/\$name/g,i[s].nick_name).replace(/\$time/g,i[s].score);10<a&&(t+=l.replace(/\$rank/g,"NO."+e.myrank.rank).replace(/\$name/g,e.myrank.nick_name).replace(/\$time/g,e.myrank.score)),$(".rank-list").html(t),$(".rank-dialog").show()}})})}})}(window.Game),function(i){var t=i.GameBtn=new Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){t.superclass.constructor.call(this,e),this.init()},init:function(e){var t=new Hilo.Bitmap({id:"runBtn_left",image:i.asset.gameScene,rect:[0,446,180,120],scaleX:i.scaleX,scaleY:i.scaleY}),a=new Hilo.Bitmap({id:"runBtn_right",image:i.asset.gameScene,rect:[570,270,180,120],scaleX:i.scaleX,scaleY:i.scaleY});t.x=(i.width-(2*t.width+t.width)*t.scaleX)/2,a.x=t.x+2*t.width*t.scaleX,t.y=a.y=this.width/8,this.addChild(t,a),a.on(Hilo.event.POINTER_START,function(){i.gamestep()}),t.on(Hilo.event.POINTER_START,function(){i.gamestep()})}})}(window.Game),function(d){var t=d.OverScene=new Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){t.superclass.constructor.call(this,e),this.init(e)},init:function(e){var t=new Hilo.Bitmap({id:"overTips",image:d.asset.gameOver,rect:[0,0,556,606],scaleX:.55,scaleY:.55}),a=null,i=null;d.configs.uid?((a=new Hilo.Bitmap({id:"shareBtn",image:d.asset.appGrade,rect:[571,249,204,62],scaleX:.5,scaleY:.5})).on("touchstart",function(){d.stage.removeChild(d.OverScene)}),i=new Hilo.Bitmap({id:"viewRankListBtn",image:d.asset.appGrade,rect:[571,0,422,68],scaleX:.5,scaleY:.5})):(a=new Hilo.Bitmap({id:"shareBtn",image:d.asset.gameOver,rect:[571,249,204,62],scaleX:.5,scaleY:.5}),i=new Hilo.Bitmap({id:"viewRankListBtn",image:d.asset.gameOver,rect:[571,0,422,68],scaleX:.5,scaleY:.5}));var s=new Hilo.Bitmap({id:"playAgainBtn",image:d.asset.gameOver,rect:[571,403,204,62],scaleX:.5,scaleY:.5}),n=new Hilo.Bitmap({id:"overBaseBtn",image:d.asset.gameOver,rect:[571,166,418,68],scaleX:.5,scaleY:.5}),c=new Hilo.Text({width:.4*this.width,text:"恭喜你，你的成绩是",scaleX:1.8,scaleY:1.8,textAlign:"center",y:t.y}),l=new Hilo.Text({id:"GradeTime",text:e.Grade.score+"秒",color:"#d34",scaleX:3,scaleY:3,width:this.width/4,textAlign:"center"}),r=new Hilo.Text({id:"rankText",text:"本次排名"+e.Grade.cur_rank+"名",width:this.width/3,scaleX:1.8,scaleY:1.8,textAlign:"center"}),o=new Hilo.Text({id:"historyRank",text:"历史最好排名"+e.Grade.best_rank+"名",width:this.width/3,scaleX:1.5,scaleY:1.5,textAlign:"center"}),h=new Hilo.Text({id:"overRank",text:"打败了"+e.Grade.beat+"%的参赛者",width:this.width/3,scaleX:1.8,scaleY:1.8,textAlign:"center"}),m=new Hilo.Text({id:"coinText",text:"奖励"+e.Grade.coin+"个奥运币",width:this.width/3,scaleX:1.5,scaleY:1.5,textAlign:"center"});l.x=(this.width-l.width*l.scaleX)/2,l.y=this.height/3+15,r.x=(this.width-r.width*r.scaleX)/2,r.y=l.y+45,o.x=(this.width-o.width*o.scaleX)/2,o.y=r.y+32,h.x=r.x,h.y=o.y+30,m.x=(this.width-m.width*m.scaleX)/2,m.y=h.y+32,t.x=(d.width-t.width*t.scaleX)/2,t.y=d.height/5,c.x=t.x,c.y=t.y+t.height*t.scaleY/5,i.x=(d.width-i.width*i.scaleX)/2,i.y=t.y+t.height*t.scaleY/5*4,n.x=(d.width-n.width*n.scaleX)/2,n.y=t.y+t.height*t.scaleY-n.height*n.scaleY/3*2,a.x=n.x+1,a.y=n.y+2,s.x=a.x+a.width*a.scaleX+2,s.y=a.y,this.addChild(t,i,n,a,s,c,l,r,o,h,m),s.on("touchstart",function(){d.stage.removeChild(d.overScene),d.playAgain()})}})}(window.Game),function(i){var t=i.PauseScene=Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){t.superclass.constructor.call(this,e),this.init(e)},init:function(e){var t=new Hilo.Bitmap({id:"pauseTips",image:Game.asset.gamePause,rect:[0,0,520,220],scaleX:.5,scaleY:.5}),a=new Hilo.Bitmap({id:"continueBtn",image:Game.asset.gamePause,rect:[0,370,286,120],scaleX:.5,scaleY:.5,width:286,height:120});t.x=(i.width-t.width*t.scaleX)/2,t.y=i.height/3,a.x=(i.width-a.width*a.scaleX)/2,a.y=t.y+t.height/3,this.addChild(t,a),a.on("touchstart",function(){this.pauseTips=null,i.state="playing",i.startTime=new Date,i.ticker.resume(),i.stage.removeChild(Game.pauseScene)})}})}(window.Game),function(a){var t=a.Person=new Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){t.superclass.constructor.call(this,e),this.init(e)},init:function(e){var t=new Hilo.Bitmap({id:"personChild",image:e.image,rect:[285,0,270,332],scaleX:.5,scaleY:.5});t.x=(a.width-t.width*t.scaleX)/2,t.y=a.height/12*7,this.addChild(t)}})}(window.Game),function(r){var t=r.ReadyScene=Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){t.superclass.constructor.call(this,e),this.init(e)},init:function(e){var t=new Hilo.Bitmap({id:"gameBackground",image:r.asset.gameRules,rect:[0,0,720,1166],scaleX:r.scaleX,scaleY:r.scaleY,x:0,y:0}),a=new Hilo.Bitmap({id:"progressBar",image:e.image,rect:[0,347,464,84],scaleX:r.scaleX,scaleY:r.scaleY,x:15,y:10}),i=new Hilo.Bitmap({id:"progress",image:e.image,rect:[496,446,252,32],scaleX:0,scaleY:r.scaleY,x:a.x+a.width*a.scaleX*.12,y:a.y+a.height*a.scaleY*.27});r.limitLength=a.width*a.scaleX*.87/i.width;var s=new Hilo.Bitmap({image:e.image,rect:[195,446,200,64],x:15,scaleX:r.scaleX,scaleY:r.scaleY}),n=new Hilo.Text({width:s.width/8,text:"0",color:"#fff",scaleY:1.7,scaleX:1.7,textAlign:"center"}),c=new Hilo.Bitmap({id:"pauseBtn",image:e.image,rect:[297,581,84,84],scaleX:r.scaleX,scaleY:r.scaleY,y:10}),l=new Hilo.Bitmap({id:"renewBtn",image:e.image,rect:[99,581,84,84],scaleX:r.scaleX,scaleY:r.scaleY,y:10});c.x=a.x+a.width*a.scaleX+10,l.x=c.x+c.width*c.scaleX+8,s.y=a.y+a.height*a.scaleY+10,n.y=s.y+s.height*s.scaleY*.07,n.x=s.x+s.width*s.scaleX/3,c.on(Hilo.event.POINTER_START,function(){r.gamePause("pause")}),l.on(Hilo.event.POINTER_START,function(){r.gameRenew()}),this.addChild(t,s,n,a,i,c,l)}})}(window.Game),function(n){var t=n.RenewScene=new Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){t.superclass.constructor.call(this,e),this.init(e)},init:function(e){var t=new Hilo.Bitmap({id:"pauseTips",image:Game.asset.gameRenew,rect:[0,0,506,216],scaleX:.5,scaleY:.5}),a=new Hilo.Bitmap({id:"baseBtn",image:Game.asset.gameRenew,rect:[0,231,424,96],scaleX:.5,scaleY:.5}),i=new Hilo.Bitmap({id:"cancelBtn",image:Game.asset.gameRenew,rect:[219,342,204,86],scaleX:.5,scaleY:.5}),s=new Hilo.Bitmap({id:"confirmBtn",image:Game.asset.gameRenew,rect:[521,101,204,86],scaleX:.5,scaleY:.5});t.x=(n.width-t.width*t.scaleX)/2,t.y=n.height/3,a.x=(n.width-a.width*a.scaleX)/2,a.y=t.y+t.height*t.scaleY/4*3,i.x=a.x+4,i.y=a.y+2,s.x=i.x+i.width*i.scaleX+2,s.y=i.y,this.addChild(t,a,i,s),s.on("touchstart",function(){n.stage.removeChild(n.renewScene),n.playAgain()}),i.on("touchstart",function(){this.pauseTips=null,n.startTime=new Date,Game.state="playing",Game.ticker.resume(),Game.stage.removeChild(Game.renewScene)})}})}(window.Game),function(n){var t=n.RuleScene=Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){t.superclass.constructor.call(this,e),this.init(e)},init:function(e){var t=new Hilo.Bitmap({id:"enterbackground",image:n.asset.gameRules,rect:[0,0,720,1166],scaleX:n.scaleX,scaleY:n.scaleY,x:0,y:0}),a=new Hilo.Bitmap({id:"ruleTipsBackground",image:n.asset.gameRules,rect:[734,0,558,664],scaleX:n.scaleX+.05,scaleY:n.scaleY+.05}),i=new Hilo.Bitmap({id:"ruleTipsContent",image:n.asset.gameRules,rect:[734,679,444,448],scaleX:n.scaleX+.1,scaleY:n.scaleY+.1}),s=new Hilo.Bitmap({id:"startBtn",image:n.asset.gameRules,width:n.Width/2,rect:[1307,143,432,128],scaleX:n.scaleX,scaleY:n.scaleY});a.x=(n.width-a.width*a.scaleX)/2,a.y=n.height/10,i.x=a.x+a.width/15*a.scaleX,i.y=a.y+a.height/5*a.scaleY,s.x=(n.width-s.width*s.scaleX)/2,s.y=n.height/5*4,this.addChild(t,a,i,s),s.on("touchstart",function(e){n.stage.removeChild(n.ruleScene),n.initSence(),n.initPersion(),n.gameCutDown()})}})}(window.Game),function(t){var a=t.Tips=Hilo.Class.create({Extends:Hilo.Container,constructor:function(e){a.superclass.constructor.call(this,e),this.initTips(e)},gameTips:null,gameRulesContent:null,initTips:function(e){this.gameTips=new Hilo.Bitmap({id:"gameRules",x:t.width/8,width:t.width/8*7,y:t.height/7,rect:e.rect,image:e.image,scaleX:.5,scaleY:.5}),this.gameRulesContent=new Hilo.Bitmap({id:"gameRulesContent",width:t.width/8*7,x:t.width/8+this.gameTips.width/20,y:t.height/7+this.gameTips.height/8,rect:[734,679,444,448],image:e.image,scaleX:.5,scaleY:.5}),this.addChild(this.gameTips,this.gameRulesContent)},addGameChar:function(e){}})}(window.Game);